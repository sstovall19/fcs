<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="customerSummaryCdrUsageReport" pageWidth="545" pageHeight="842" columnWidth="545" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" scriptletClass="com.fonality.util.ReportScriplet" uuid="ca569e1b-0a34-4cd2-90cd-ed61eca188e9">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="cellStyle">
		<box topPadding="6" leftPadding="6" bottomPadding="1" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="1.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="summaryDetailCell" hAlign="Center" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box topPadding="1" leftPadding="1" bottomPadding="2" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="0.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="0.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="detailBand">
		<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="0.0"/>
			<bottomPen lineWidth="0.0"/>
			<rightPen lineWidth="0.0"/>
		</box>
	</style>
	<style name="cellStyle2" fontSize="11">
		<box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="1.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="style1">
		<box topPadding="0" leftPadding="1" bottomPadding="0" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="0.75"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="cellStyle4" fontSize="11">
		<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0">
			<pen lineWidth="1.0" lineColor="#000000"/>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<leftPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
			<rightPen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="summaryHeaderStyle">
		<box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="1.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="summaryFooterCell" mode="Opaque" forecolor="#FFFFFF" backcolor="#000000" hAlign="Center" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0">
			<pen lineWidth="1.0" lineColor="#000000"/>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<leftPen lineWidth="1.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
			<rightPen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="addressHeaderStyle">
		<box topPadding="0" leftPadding="1" bottomPadding="0" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="1.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="0.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="summaryDetailCell2" hAlign="Center" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box topPadding="1" leftPadding="50" bottomPadding="2" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="0.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="0.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="summaryDetailCell3" hAlign="Left" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box topPadding="1" leftPadding="75" bottomPadding="2" rightPadding="1">
			<pen lineWidth="1.0"/>
			<topPen lineWidth="0.0"/>
			<leftPen lineWidth="1.0"/>
			<bottomPen lineWidth="0.0"/>
			<rightPen lineWidth="1.0"/>
		</box>
	</style>
	<style name="summaryFooterCell1" mode="Opaque" forecolor="#FFFFFF" backcolor="#000000" hAlign="Center" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box topPadding="0" leftPadding="20" bottomPadding="0" rightPadding="0">
			<pen lineWidth="1.0" lineColor="#000000"/>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<leftPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
			<rightPen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="dataset1" scriptletClass="com.fonality.util.ReportScriplet" uuid="59a5337e-c6ac-4100-8642-51d01dec63ca">
		<parameter name="call_type_list_dataset" class="java.util.List" isForPrompting="false">
			<defaultValueExpression><![CDATA[new ArrayList()]]></defaultValueExpression>
		</parameter>
		<field name="callType" class="java.lang.String"/>
		<field name="billedAmount" class="java.math.BigDecimal"/>
		<field name="durationSum" class="java.lang.Integer"/>
		<variable name="rowCnt" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{callType}]]></variableExpression>
		</variable>
		<variable name="durationSum" class="java.lang.Integer" calculation="Sum">
			<variableExpression><![CDATA[$F{durationSum}]]></variableExpression>
		</variable>
		<variable name="amountSum" class="java.math.BigDecimal" calculation="Sum">
			<variableExpression><![CDATA[$F{billedAmount}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="dataset2" scriptletClass="com.fonality.util.ReportScriplet" uuid="59a5337e-c6ac-4100-8642-51d01dec63ca">
		<parameter name="server_cdr_list_dataset" class="java.util.List" isForPrompting="false">
			<defaultValueExpression><![CDATA[new ArrayList()]]></defaultValueExpression>
		</parameter>
		<parameter name="server_summary_report" class="java.io.InputStream" isForPrompting="false"/>
		<field name="addr1" class="java.lang.String"/>
		<field name="billedAmount" class="java.math.BigDecimal"/>
		<field name="durationSum" class="java.lang.Integer"/>
		<field name="callTypeCdrList" class="java.util.List"/>
		<field name="serverId" class="java.lang.Integer"/>
		<variable name="durationSum" class="java.lang.Integer" calculation="Sum">
			<variableExpression><![CDATA[$F{durationSum}]]></variableExpression>
		</variable>
		<variable name="amountSum" class="java.math.BigDecimal" calculation="Sum">
			<variableExpression><![CDATA[$F{billedAmount}]]></variableExpression>
		</variable>
		<variable name="rowCnt" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{addr1}]]></variableExpression>
		</variable>
	</subDataset>
	<parameter name="start_date" class="java.util.Date" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="end_date" class="java.util.Date" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="header_logo_path" class="java.io.InputStream" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="call_type_summary" class="java.util.List" isForPrompting="false"/>
	<parameter name="addr1" class="java.lang.String" isForPrompting="false"/>
	<parameter name="server_cdr_list" class="java.util.List" isForPrompting="false"/>
	<parameter name="server_summary_report" class="java.io.InputStream" isForPrompting="false"/>
	<queryString>
		<![CDATA[select 1 as 'NA']]>
	</queryString>
	<variable name="durationSum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[]]></variableExpression>
		<initialValueExpression><![CDATA[new Integer(0)]]></initialValueExpression>
	</variable>
	<variable name="amountSum" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[]]></variableExpression>
		<initialValueExpression><![CDATA[new Integer(0)]]></initialValueExpression>
	</variable>
	<variable name="rowExists" class="java.lang.Boolean"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="138">
			<printWhenExpression><![CDATA[$V{REPORT_COUNT} > 0]]></printWhenExpression>
			<componentElement>
				<reportElement uuid="eacdc9a8-92c8-40c5-a6e2-dd9fc4e160e4" isPrintRepeatedValues="false" x="0" y="99" width="545" height="38" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true"/>
				<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
					<datasetRun subDataset="dataset1" uuid="99a4aacb-ac2f-4031-85de-db2d488c4a08">
						<datasetParameter name="call_type_list_dataset">
							<datasetParameterExpression><![CDATA[$P{call_type_summary}]]></datasetParameterExpression>
						</datasetParameter>
						<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{call_type_summary})]]></dataSourceExpression>
					</datasetRun>
					<jr:listContents height="38" width="545">
						<textField>
							<reportElement uuid="0ab0d198-1b22-48c5-99a3-5c2f2cd1a2aa" style="summaryDetailCell2" x="0" y="0" width="195" height="19"/>
							<textElement textAlignment="Left" verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$F{callType}]]></textFieldExpression>
						</textField>
						<textField>
							<reportElement uuid="300af7e2-1518-4347-adf5-5380852aa6fb" style="summaryDetailCell" x="195" y="0" width="175" height="19"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$P{REPORT_SCRIPTLET}.formatDuration($F{durationSum})]]></textFieldExpression>
						</textField>
						<textField isStretchWithOverflow="true" pattern="¤ #,##0.00">
							<reportElement uuid="50d9a8f3-e37a-4594-86fc-2e4c218655d3" style="summaryDetailCell3" x="370" y="0" width="175" height="19"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$F{billedAmount}]]></textFieldExpression>
						</textField>
						<frame>
							<reportElement uuid="30c78324-2be9-4962-8e57-df498de585e5" style="detailBand" positionType="Float" stretchType="RelativeToTallestObject" x="0" y="19" width="545" height="19" isRemoveLineWhenBlank="true">
								<printWhenExpression><![CDATA[$V{rowCnt} == $P{call_type_list_dataset}.size()]]></printWhenExpression>
							</reportElement>
							<textField pattern="">
								<reportElement uuid="bd5606fe-0036-4e47-a14d-1244447bbdf9" mode="Opaque" x="195" y="0" width="175" height="19" forecolor="#FFFFFF" backcolor="#000000"/>
								<textElement textAlignment="Center">
									<font size="14" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[$P{REPORT_SCRIPTLET}.formatDuration($V{durationSum})]]></textFieldExpression>
							</textField>
							<textField pattern="¤ #,##0.00">
								<reportElement uuid="b4ff1832-5b90-483f-ab0a-1a4709cf6a91" style="summaryFooterCell1" mode="Opaque" x="370" y="0" width="175" height="19" forecolor="#FFFFFF" backcolor="#000000"/>
								<textElement textAlignment="Center">
									<font size="14" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{amountSum}]]></textFieldExpression>
							</textField>
							<textField pattern="">
								<reportElement uuid="b4ff1832-5b90-483f-ab0a-1a4709cf6a91" style="summaryFooterCell" mode="Opaque" x="0" y="0" width="195" height="19" forecolor="#FFFFFF" backcolor="#000000">
									<printWhenExpression><![CDATA[$V{rowCnt} == $P{call_type_list_dataset}.size()]]></printWhenExpression>
								</reportElement>
								<textElement textAlignment="Right">
									<font size="14" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[" GRAND TOTAL: "]]></textFieldExpression>
							</textField>
						</frame>
					</jr:listContents>
				</jr:list>
			</componentElement>
			<staticText>
				<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="summaryHeaderStyle" mode="Opaque" x="0" y="80" width="195" height="18" backcolor="#D6DAD9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Call Type]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="summaryHeaderStyle" mode="Opaque" x="195" y="80" width="175" height="18" backcolor="#D6DAD9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Billable Duration]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="summaryHeaderStyle" mode="Opaque" x="370" y="80" width="175" height="18" backcolor="#D6DAD9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Billed Amount]]></text>
			</staticText>
			<image scaleImage="FillFrame" isUsingCache="true" onErrorType="Blank">
				<reportElement uuid="e8efddf4-f1b5-4898-b62c-eef40b9c4006" x="0" y="0" width="545" height="59"/>
				<imageExpression><![CDATA[$P{header_logo_path}]]></imageExpression>
			</image>
			<textField>
				<reportElement uuid="536cff2c-6e06-4655-a9aa-70f9665cbb2e" style="style1" mode="Opaque" x="0" y="56" width="545" height="24" backcolor="#D6DAD9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{REPORT_SCRIPTLET}.formatDate($P{start_date}) + " - " + $P{REPORT_SCRIPTLET}.formatDate($P{end_date})]]></textFieldExpression>
			</textField>
		</band>
		<band height="150">
			<printWhenExpression><![CDATA[$P{server_cdr_list}.size() > 1]]></printWhenExpression>
			<componentElement>
				<reportElement uuid="f61972e4-1775-49d6-a200-cbabbc506ab1" positionType="Float" stretchType="RelativeToTallestObject" x="0" y="20" width="545" height="130" isRemoveLineWhenBlank="true"/>
				<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
					<datasetRun subDataset="dataset2" uuid="99a4aacb-ac2f-4031-85de-db2d488c4a08">
						<datasetParameter name="server_cdr_list_dataset">
							<datasetParameterExpression><![CDATA[$P{server_cdr_list}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="server_summary_report">
							<datasetParameterExpression><![CDATA[$P{server_summary_report}]]></datasetParameterExpression>
						</datasetParameter>
						<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{server_cdr_list})]]></dataSourceExpression>
					</datasetRun>
					<jr:listContents height="130" width="545">
						<subreport isUsingCache="true">
							<reportElement uuid="35653ee4-7c6e-41e8-9c1c-ab4543bb07f3" x="0" y="42" width="545" height="75"/>
							<subreportParameter name="server_id">
								<subreportParameterExpression><![CDATA[$F{serverId}]]></subreportParameterExpression>
							</subreportParameter>
							<subreportParameter name="durationSum">
								<subreportParameterExpression><![CDATA[$F{durationSum}]]></subreportParameterExpression>
							</subreportParameter>
							<subreportParameter name="addr1">
								<subreportParameterExpression><![CDATA[$F{addr1}]]></subreportParameterExpression>
							</subreportParameter>
							<subreportParameter name="billedAmount">
								<subreportParameterExpression><![CDATA[$F{billedAmount}]]></subreportParameterExpression>
							</subreportParameter>
							<subreportParameter name="call_type_size">
								<subreportParameterExpression><![CDATA[$F{callTypeCdrList}.size()]]></subreportParameterExpression>
							</subreportParameter>
							<subreportParameter name="cdr_list">
								<subreportParameterExpression><![CDATA[$F{callTypeCdrList}]]></subreportParameterExpression>
							</subreportParameter>
							<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{callTypeCdrList})]]></dataSourceExpression>
							<subreportExpression><![CDATA[$P{server_summary_report}]]></subreportExpression>
						</subreport>
						<textField>
							<reportElement uuid="536cff2c-6e06-4655-a9aa-70f9665cbb2e" style="addressHeaderStyle" mode="Opaque" x="0" y="0" width="545" height="25" backcolor="#658031"/>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font size="14" isBold="true"/>
							</textElement>
							<textFieldExpression><![CDATA["Server " + $F{serverId} + " - " + $F{addr1}]]></textFieldExpression>
						</textField>
						<staticText>
							<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="cellStyle2" x="195" y="25" width="175" height="16"/>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
							</textElement>
							<text><![CDATA[Billable Duration]]></text>
						</staticText>
						<staticText>
							<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="cellStyle2" x="0" y="25" width="195" height="16"/>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
							</textElement>
							<text><![CDATA[Call Type]]></text>
						</staticText>
						<staticText>
							<reportElement uuid="6e4fdb75-c535-4d9d-960a-a707ab10db89" style="cellStyle2" x="370" y="25" width="175" height="16"/>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
							</textElement>
							<text><![CDATA[Billed Amount]]></text>
						</staticText>
					</jr:listContents>
				</jr:list>
			</componentElement>
		</band>
	</detail>
</jasperReport>
